<div class="col-md-12 jinxloadPage" ng-cloak>
    <script>
        /*
        // This is called with the results from from FB.getLoginStatus().
        function statusChangeCallback(response) {
            console.log('statusChangeCallback');
            console.log(response);
            // The response object is returned with a status field that lets the
            // app know the current login status of the person.
            // Full docs on the response object can be found in the documentation
            // for FB.getLoginStatus().
            if (response.status === 'connected') {
                // Logged into your app and Facebook.
                testAPI();
            } else if (response.status === 'not_authorized') {
                // The person is logged into Facebook, but not your app.
                document.getElementById('status').innerHTML = 'Please log ' +
                'into this app.';
            } else {
                // The person is not logged into Facebook, so we're not sure if
                // they are logged into this app or not.
                document.getElementById('status').innerHTML = 'Please log ' +
                'into Facebook.';
            }
        }

        function checkLoginState() {
            FB.getLoginStatus(function(response) {
                statusChangeCallback(response);
            });
        }





        FB.login(function(response) {
            if (response.status === 'connected') {
                console.log('user is now connected via FB');
                window.location = '/#/home/';
            } else if (response.status === 'not_authorized') {
                console.log('user is now connected via FB, but not app?');
            } else {
                console.log('The person is not logged into Facebook, so we\'re not sure if they are logged into this app or not.');
            }
        });

        function testAPI() {
            console.log('Welcome!  Fetching your information.... ');
            FB.api('/me', function(response) {
                console.log('Successful login for: ' + response.name);
                /*
                    do stuff on /home/
                */
           /* });*/
        /*}*/
    </script>

    <a href="/auth/facebook">Login with Facebook</a>


    <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
    </fb:login-button>

    <div id="status"></div>

    <div class="page-header text-center">
		<h1>Connexion / Inscription</h1>
	</div>
	<div class="panel panel-default">
		<div class="panel-heading pointer">
			<h3 class="panel-title">Se connecter</h3>
		</div>
		<div class="panel-body">
			<form role="form">
				<div class="form-group">
					<label for="username">Nom d'utilisateur:</label>
					<input type="text" id="username" class="form-control" required="true" ng-model="data.username">
				</div>
				<div class="form-group">
					<label for="password">Mot de passe:</label>
					<input type="text" id="password" class="form-control" required="true" ng-model="data.password">
				</div>
				<div class="text-center">
					<a class="btn btn-default" ng-click="connect('register')">Inscription</a> - <a class="btn btn-default" ng-click="connect('login')">Connexion</a>
				</div>
			</form>
		</div>
	</div>
</div>